# =============================================================================
# SLO Dashboard API Configuration
# =============================================================================
# Copy this file to .env and customize for your environment

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT=3001
NODE_ENV=development  # development | production

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Option 1: Individual connection parameters
DB_HOST=localhost
DB_PORT=5432
DB_USER=slo_user
DB_PASSWORD=slo_password
DB_NAME=slo_dashboard
DB_POOL_SIZE=10

# Option 2: Connection string (takes precedence if set)
# Render and other platforms typically provide this
# DATABASE_URL=postgresql://user:password@host:5432/dbname

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
# Enable/disable rate limiting (enabled by default)
RATE_LIMIT_ENABLED=true

# General API rate limiting
RATE_LIMIT_WINDOW_MS=900000          # 15 minutes (in milliseconds)
RATE_LIMIT_MAX_REQUESTS=100          # Max requests per window
RATE_LIMIT_MESSAGE=Too many requests, please try again later.

# Skip successful/failed requests from rate limit count
RATE_LIMIT_SKIP_SUCCESSFUL=false
RATE_LIMIT_SKIP_FAILED=false

# Heavy endpoint rate limiting (for expensive queries like /api/series)
RATE_LIMIT_HEAVY_WINDOW_MS=900000    # 15 minutes
RATE_LIMIT_HEAVY_MAX_REQUESTS=20     # Max requests per window

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ENABLED=true
CORS_ORIGIN=*                        # In production, set to your frontend domain
CORS_CREDENTIALS=false               # Set true if using cookies/auth

# -----------------------------------------------------------------------------
# Compression Configuration
# -----------------------------------------------------------------------------
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6                  # 1-9, higher = more compression, slower
COMPRESSION_THRESHOLD=1024           # Min bytes to compress (1KB)

# -----------------------------------------------------------------------------
# Data Query Configuration
# -----------------------------------------------------------------------------
DATA_DEFAULT_DAYS=28                 # Default days of data to return
DATA_MAX_DAYS=90                     # Maximum days that can be requested
DATA_MAX_BATCH_SIZE=50               # Maximum SLIs in a batch request

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=info                       # error | warn | info | debug
LOG_REQUESTS=false                   # Log all HTTP requests

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# Trust proxy headers (required for Render, Heroku, etc.)
TRUST_PROXY=false                    # Set true in production behind a proxy

# Show detailed error messages (disable in production)
VERBOSE_ERRORS=true                  # Set false in production

# =============================================================================
# Production Example (Render)
# =============================================================================
# NODE_ENV=production
# DATABASE_URL=<provided_by_render>
# PORT=<provided_by_render>
# CORS_ORIGIN=https://your-frontend.onrender.com
# TRUST_PROXY=true
# VERBOSE_ERRORS=false
# RATE_LIMIT_ENABLED=true
# COMPRESSION_ENABLED=true
